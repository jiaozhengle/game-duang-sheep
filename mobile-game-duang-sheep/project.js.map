{"version":3,"sources":["project.js"],"names":["require","e","t","n","r","s","o","u","a","i","f","Error","code","l","exports","call","length","GameOverMenu","module","Fire","_RFpush","Class","extends","Component","properties","title","default","type","Entity","panel","btn_play","scoreText","BitmapText","onEnable","Game","this","text","instance","score","on","entity","active","mask","Engine","loadScene","bind","transform","position","Vec2","update","y","Time","deltaTime","_RFpop","Sheep","ScrollPicture","PipeGroupManager","GameState","defineEnum","Ready","Run","Over","constructor","gameState","scoreEffect","scoreTopPos","maskRender","tempMask","sheep","background","ground","pipeGroupMgr","gameOverMenu","readyAuido","AudioSource","gameBgAudio","dieAudio","gameOverAudio","scoreAudio","tempDisappear","tempAddSorce","onStart","_pauseUpdate","find","instantiate","name","dontDestroyOnLoad","getComponent","SpriteRenderer","enabled","pipeGroupList","pipeGroup","_playReadyGameBg","play","onEnd","over","loop","color","sheepRect","renderer","getWorldBounds","gameOver","collisionDetection","stop","state","State","Dead","updateSorce","_updateScoreEffect","nextPipeGroup","getNext","pipeGroupRect","bottomRenderer","crossed","xMin","xMax","setAsPassed","pos","x","_playScoreEffect","tempEntity","effect","disappear","disappearAnim","SpriteAnimation","destroy","MainMenu","fadeInGame","onLoad","lateUpdate","lastTime","srcPipeGroup","initPipeGroupPos","spawnInterval","get","getChildren","visible","time","createPipeGroupEntity","parent","pipeGroupEntity","passed","pipe","pipeRender","pipeRect","Intersection","rectRect","idleTime","Math","abs","PipeGroup","speed","minX","topPosRange","spacingRange","topYpos","randomRange","randomSpacing","bottomYpos","topEntity","bottomEntity","offsetX","None","Jump","Drop","DropEnd","anim","currentSpeed","jumpEvent","initSheepPos","maxY","groundY","gravity","initSpeed","_state","set","value","animName","jumpAudio","jumpEffect","dropEndEffect","_jump","Input","onDestroy","off","_updateState","_updateTransform","_playEffect","isPlaying","flying","tempEffect","effectAnim","audio-clip","AudioClip","extend","Asset","prop","RawType","HideInInspector","AudioContext","getClipBuffer","getClipLength","getClipSamples","getClipChannels","getClipFrequency","prototype","createEntity","cb","ent","audioSource","addComponent","clip","audio-legacy","loader","url","callback","audio","document","createElement","addEventListener","src","UseWebAudio","window","webkitAudioContext","mozAudioContext","LoadManager","registerRawTypes","initSource","target","_audio","getCurrentTime","_playing","currentTime","updateTime","duration","updateMute","muted","mute","updateVolume","volume","updateLoop","updateAudioClip","rawData","pause","_paused","_onPlayEnd","error","audio-source","_startTime","_lastPlay","_buffSource","_volumeGain","addComponentMenu","Object","defineProperty","getset","_clip","ObjectType","_playbackRate","updatePlaybackRate","_loop","_mute","_volume","clamp01","Range","playOnLoad","onDisable","audio-web-audio","safeDecodeAudioData","context","buffer","timeout","timerId","setTimeout","MaxDecodeTime","decodeAudioData","decodedData","clearTimeout","onProgress","xhr","nativeAC","response","_loadFromXHR","NativeAudioContext","getPlayedTime","gain","isPaused","onended","ended","at","bufferSource","createBufferSource","createGain","connect","destination","playbackRate","start","numberOfChannels","sampleRate","sprite-animation-clip","WrapMode","Default","Once","Loop","PingPong","ClampForever","StopAction","DoNothing","DefaultSprite","Hide","Destroy","FrameInfo","define","Sprite","Integer_Obsoleted","SpriteAnimationClip","CustomAsset","_frameInfoFrames","wrapMode","stopAction","_frameRate","frameRate","round","max","frameInfos","getTotalFrames","frames","getFrameInfoFrames","Array","totalFrames","addCustomAssetMenu","sprite-animation-state","_binarySearch","array","h","m","_wrap","_value","_maxValue","_wrapMode","cnt","floor","SpriteAnimationState","animClip","frame","_cachedIndex","getCurrentIndex","wrappedIndex","frameInfoIndex","sprite-animation","_nameToState","_curAnimation","_spriteRenderer","_defaultSprite","_lastFrameIndex","_curIndex","_playStartFrame","defaultAnimation","animations","_playAutomatically","playAutomatically","_init","initialized","sprite","getAnimState","playingAnim","animState","frameCount","_sample","delta","_step","newIndex"],"mappings":"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","file":"project.js","sourcesContent":["require=(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require==\"function\"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error(\"Cannot find module '\"+o+\"'\");throw f.code=\"MODULE_NOT_FOUND\",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require==\"function\"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({\"GameOverMenu\":[function(require,module,exports){\nFire._RFpush(module, '5ca38jdHudCh7QHLs700P5Q', 'GameOverMenu');\n// script/GameOverMenu.js\n\nvar GameOverMenu = Fire.Class({\n    // 继承\n    extends: Fire.Component,\n    // 属性\n    properties: {\n        // 标题\n        title:{\n            default: null,\n            type: Fire.Entity\n        },\n        // 面板\n        panel:{\n            default: null,\n            type: Fire.Entity\n        },\n        // 按钮\n        btn_play:{\n            default: null,\n            type: Fire.Entity\n        },\n        // 得分\n        scoreText:{\n            default: null,\n            type: Fire.BitmapText\n        }\n    },\n    onEnable: function () {\n        var Game = require('Game');\n        this.scoreText.text = Game.instance.score;\n        this.btn_play.on('mouseup', function () {\n            this.scoreText.text = \"0\";\n            this.entity.active = false;\n            Game.instance.mask.active = true;\n            Fire.Engine.loadScene('MainMenu');\n        }.bind(this));\n\n        this.title.transform.position = new Fire.Vec2(0, 250);\n        this.panel.transform.position = new Fire.Vec2(0, -200);\n    },\n    // 更新\n    update: function () {\n        if (this.title.transform.y > 100) {\n            this.title.transform.y -= Fire.Time.deltaTime * 600;\n        }\n        else {\n            this.title.transform.y = 100;\n        }\n        if (this.panel.transform.y < 0) {\n            this.panel.transform.y += Fire.Time.deltaTime * 600;\n        }\n        else {\n            this.panel.transform.y = 0;\n        }\n    }\n});\n\nFire._RFpop();\n},{\"Game\":\"Game\"}],\"Game\":[function(require,module,exports){\nFire._RFpush(module, '48f8d15ZstO4aRYKt5BKAMw', 'Game');\n// script/Game.js\n\nvar Sheep = require('Sheep');\nvar ScrollPicture = require('ScrollPicture');\nvar PipeGroupManager = require('PipeGroupManager');\n\nvar GameState = Fire.defineEnum({\n    Ready: -1,\n    Run : -1,\n    Over: -1\n});\n\nvar Game = Fire.Class({\n    // 继承\n    extends: Fire.Component,\n    // 构造函数\n    constructor: function () {\n        // 游戏状态\n        this.gameState = GameState.Ready;\n        // 分数\n        this.score = 0;\n        //-- 得分特效\n        this.scoreEffect = null;\n        this.scoreTopPos = 0;\n        // 遮罩\n        this.mask = null;\n        this.maskRender = null;\n        //\n        Game.instance = this;\n    },\n    // 属性\n    properties: {\n        tempMask: {\n            default: null,\n            type: Fire.Entity\n        },\n        // 获取绵羊\n        sheep: {\n            default: null,\n            type: Sheep\n        },\n        // 获取背景\n        background: {\n            default: null,\n            type: ScrollPicture\n        },\n        // 获取地面\n        ground: {\n            default: null,\n            type: ScrollPicture\n        },\n        // 获取障碍物管理\n        pipeGroupMgr: {\n            default: null,\n            type: PipeGroupManager\n        },\n        // 获取gameOverMenu对象\n        gameOverMenu: {\n            default: null,\n            type: Fire.Entity\n        },\n        // 获取分数对象\n        scoreText: {\n            default: null,\n            type: Fire.BitmapText\n        },\n        readyAuido: {\n            default: null,\n            type: Fire.AudioSource\n        },\n        // 获取背景音效\n        gameBgAudio: {\n            default: null,\n            type: Fire.AudioSource\n        },\n        // 获取死亡音效\n        dieAudio: {\n            default: null,\n            type: Fire.AudioSource\n        },\n        // 获取失败音效\n        gameOverAudio: {\n            default: null,\n            type: Fire.AudioSource\n        },\n        // 获取得分音效\n        scoreAudio: {\n            default: null,\n            type: Fire.AudioSource\n        },\n        // 得分特效\n        tempDisappear: {\n            default: null,\n            type: Fire.Entity\n        },\n        // 加分预制\n        tempAddSorce:{\n            default: null,\n            type: Fire.Entity\n        }\n    },\n    // 开始\n    onStart: function () {\n        this.gameState = GameState.Ready;\n        this.score = 0;\n        this.scoreText.text = this.score;\n\n        // 所有元素停止更新\n        this._pauseUpdate(false);\n        // 遮罩\n        this.mask = Fire.Entity.find('/mask');\n        if (!this.mask) {\n            this.mask = Fire.instantiate(this.tempMask);\n            this.mask.name = 'mask';\n            this.mask.dontDestroyOnLoad = true;\n        }\n        this.maskRender = this.mask.getComponent(Fire.SpriteRenderer);\n    },\n    _pauseUpdate: function (enabled){\n        this.ground.enabled = enabled;\n        this.background.enabled = enabled;\n        for (var i = 0; i < this.pipeGroupMgr.pipeGroupList.length; ++i) {\n            var pipeGroup = this.pipeGroupMgr.pipeGroupList[i].getComponent('PipeGroup');\n            pipeGroup.enabled = enabled;\n        }\n        this.pipeGroupMgr.enabled = enabled;\n    },\n    _playReadyGameBg: function () {\n        this.readyAuido.play();\n        this.readyAuido.onEnd = function () {\n            if(this.gameState === GameState.over){\n                return;\n            }\n            this.gameBgAudio.loop = true;\n            this.gameBgAudio.play();\n        }.bind(this);\n    },\n    // 更新\n    update: function () {\n        switch (this.gameState) {\n            case GameState.Ready:\n                if (this.mask.active) {\n                    this.maskRender.color.a -= Fire.Time.deltaTime;\n                    if (this.maskRender.color.a < 0.3) {\n                        this._playReadyGameBg();\n                    }\n                    if (this.maskRender.color.a <= 0) {\n                        this.mask.active = false;\n                        this.gameState = GameState.Run;\n                        this._pauseUpdate(true);\n                    }\n                }\n                break;\n            case GameState.Run:\n                var sheepRect = this.sheep.renderer.getWorldBounds();\n                var gameOver = this.pipeGroupMgr.collisionDetection(sheepRect);\n                if (gameOver) {\n                    // 背景音效停止，死亡音效播放\n                    this.gameBgAudio.stop();\n                    this.dieAudio.play();\n                    this.gameOverAudio.play();\n\n                    this.gameState = GameState.Over;\n                    this.sheep.state = Sheep.State.Dead;\n\n                    this._pauseUpdate(false);\n\n                    this.gameOverMenu.active = true;\n                }\n                // 计算分数\n                this.updateSorce();\n                break;\n            default :\n                break;\n        }\n        this._updateScoreEffect();\n    },\n    // 更新分数\n    updateSorce: function () {\n        var nextPipeGroup = this.pipeGroupMgr.getNext();\n        if (nextPipeGroup) {\n            var sheepRect = this.sheep.renderer.getWorldBounds();\n            var pipeGroupRect = nextPipeGroup.bottomRenderer.getWorldBounds();\n            // 当绵羊的右边坐标越过水管右侧坐标\n            var crossed = sheepRect.xMin > pipeGroupRect.xMax;\n            if (crossed) {\n                // 分数+1\n                this.score++;\n                this.scoreText.text = this.score;\n                this.pipeGroupMgr.setAsPassed(nextPipeGroup);\n                // 分数增加音效\n                this.scoreAudio.play();\n\n                var pos = new Vec2(this.sheep.transform.x - 30, this.sheep.transform.y + 50);\n                this.scoreEffect = this._playScoreEffect(this.tempAddSorce, pos);\n                this.scoreTopPos = this.scoreEffect.transform.y + 100;\n            }\n        }\n    },\n    _playScoreEffect: function(tempEntity, pos) {\n        var effect = Fire.instantiate(tempEntity);\n        effect.transform.position = pos;\n        return effect;\n    },\n    _updateScoreEffect: function(){\n        if (this.scoreEffect) {\n            this.scoreEffect.transform.y += Fire.Time.deltaTime * 200;\n            if (this.scoreEffect.transform.y > this.scoreTopPos) {\n                var disappear = Fire.instantiate(this.tempDisappear);\n                var disappearAnim = disappear.getComponent(Fire.SpriteAnimation);\n                disappear.transform.position = this.scoreEffect.transform.position;\n                disappearAnim.play();\n\n                this.scoreEffect.destroy();\n                this.scoreEffect = null;\n                this.scoreTopPos = 0;\n            }\n        }\n    }\n});\n\nGame.instance = null;\n\nFire._RFpop();\n},{\"PipeGroupManager\":\"PipeGroupManager\",\"ScrollPicture\":\"ScrollPicture\",\"Sheep\":\"Sheep\"}],\"MainMenu\":[function(require,module,exports){\nFire._RFpush(module, '3438aZsLsJIJJKkdNBrDQNU', 'MainMenu');\n// script/MainMenu.js\n\nvar ScrollPicture = require('ScrollPicture');\n\nvar MainMenu = Fire.Class({\n    // 继承\n    extends: Fire.Component,\n    // 构造函数\n    constructor: function () {\n        this.mask = null;\n        this.maskRender = null;\n        this.fadeInGame = false;\n    },\n    // 属性\n    properties: {\n        // 遮罩模板\n        tempMask: {\n            default: null,\n            type: Fire.Entity\n        },\n        // 地面\n        ground: {\n            default: null,\n            type: ScrollPicture\n        },\n        // 背景\n        background: {\n            default: null,\n            type   : ScrollPicture\n        },\n        // 开始按钮\n        btn_play: {\n            default: null,\n            type: Fire.Entity\n        }\n    },\n    onLoad: function () {\n        this.btn_play.on('mouseup', function () {\n            this.fadeInGame = true;\n            this.mask.active = true;\n        }.bind(this));\n\n        this.mask = Fire.Entity.find('/mask');\n        this.maskRender = null;\n        if (!this.mask) {\n            this.mask = Fire.instantiate(this.tempMask);\n            this.mask.name = 'mask';\n            this.mask.dontDestroyOnLoad = true;\n        }\n        this.maskRender = this.mask.getComponent(Fire.SpriteRenderer);\n        this.maskRender.color.a = 1;\n        this.fadeInGame = false;\n        \n        //Fire.Engine.preloadScene('Game');\n    },\n    lateUpdate: function () {\n        if (this.mask.active) {\n            if (this.fadeInGame) {\n                this.maskRender.color.a += Fire.Time.deltaTime;\n                if (this.maskRender.color.a > 1) {\n                    Fire.Engine.loadScene('Game');\n                    this.enabled = false;\t// stop calling loadScene anymore!\n                }\n            }\n            else {\n                this.maskRender.color.a -= Fire.Time.deltaTime;\n                if (this.maskRender.color.a < 0) {\n                    this.maskRender.color.a = 0;\n                    this.mask.active = false;\n                }\n            }\n        }\n    }\n});\n\nFire._RFpop();\n},{\"ScrollPicture\":\"ScrollPicture\"}],\"PipeGroupManager\":[function(require,module,exports){\nFire._RFpush(module, 'a92ffSpmqpE8oy0ueQo+VAg', 'PipeGroupManager');\n// script/PipeGroupManager.js\n\nvar PipeGroupManager = Fire.Class({\n    // 继承\n    extends: Fire.Component,\n    // 构造函数\n    constructor: function () {\n        // 上一次创建PipeGroup的时间\n        this.lastTime = 0;\n    },\n    // 属性\n    properties: {\n        // 获取PipeGroup模板\n        srcPipeGroup: {\n            default: null,\n            type: Fire.Entity\n        },\n        // PipeGroup初始坐标\n        initPipeGroupPos: {\n            default: new Fire.Vec2(600, 0)\n        },\n        // 创建PipeGroup需要的时间\n        spawnInterval: 3,\n        // 管道列表\n        pipeGroupList: {\n            get: function () {\n                return this.entity.getChildren();\n            },\n            visible: false\n        }\n    },\n    // 初始化\n    onLoad: function () {\n        this.lastTime = Fire.Time.time + 10;\n    },\n    // 创建管道组\n    createPipeGroupEntity: function () {\n        var pipeGroup = Fire.instantiate(this.srcPipeGroup);\n        pipeGroup.parent = this.entity;\n        pipeGroup.transform.position = this.initPipeGroupPos;\n        pipeGroup.active = true;\n    },\n    // 获取下个未通过的水管\n    getNext: function () {\n        for (var i = 0; i < this.pipeGroupList.length; ++i) {\n            var pipeGroupEntity = this.pipeGroupList[i];\n            var pipeGroup = pipeGroupEntity.getComponent('PipeGroup');\n            if (!pipeGroup.passed) {\n                return pipeGroup;\n            }\n        }\n        return null;\n    },\n    // 标记已通过的水管\n    setAsPassed: function (pipeGroup) {\n        pipeGroup.passed = true;\n    },\n    // 碰撞检测\n    collisionDetection: function (sheepRect) {\n        for (var i = 0; i < this.pipeGroupList.length; ++i) {\n            // 上方障碍物\n            var pipeGroupEntity = this.pipeGroupList[i];\n            var pipe = pipeGroupEntity.find('topPipe');\n            var pipeRender = pipe.getComponent(Fire.SpriteRenderer)\n            var pipeRect = pipeRender.getWorldBounds();\n\t\t\t\t\t\t\n          \t// 降低难度\n          \tpipeRect.y += 50;\n          \n            if (Fire.Intersection.rectRect(sheepRect, pipeRect)) {\n                return true;\n            }\n\n            // 下方障碍物\n            pipe = pipeGroupEntity.find('bottomPipe');\n            pipeRender = pipe.getComponent(Fire.SpriteRenderer);\n            pipeRect = pipeRender.getWorldBounds();\n          \t\n          \t// 降低难度\n          \tpipeRect.y -= 50;\n            if (Fire.Intersection.rectRect(sheepRect, pipeRect)) {\n                return true;\n            }\n        }\n        return false;\n    },\n    // 更新\n    update: function () {\n        // 每过一段时间创建障碍物\n        var idleTime = Math.abs(Fire.Time.time - this.lastTime);\n        if (idleTime >= this.spawnInterval) {\n            this.lastTime = Fire.Time.time;\n            this.createPipeGroupEntity();\n        }\n    }\n});\n\nFire._RFpop();\n},{}],\"PipeGroup\":[function(require,module,exports){\nFire._RFpush(module, 'ce446mwMy9DkLsyMuZTGTC9', 'PipeGroup');\n// script/PipeGroup.js\n\nvar PipeGroup = Fire.Class({\n    // 继承\n    extends: Fire.Component,\n    // 构造函数\n    constructor: function () {\n        // 保存下方管道的Renderer,方便获得水平边界\n        this.bottomRenderer = null;\n        // 是否已经被通过\n        this.passed = false;\n    },\n    // 属性\n    properties: {\n        // 基础移动速度\n        speed: 200,\n        // 超出这个范围就会被销毁\n        minX: -900,\n        // 上方管子坐标范围 Min 与 Max\n        topPosRange: {\n            default: new Fire.Vec2(100, 160)\n        },\n        // 上方与下方管道的间距 Min 与 Max\n        spacingRange: {\n            default: new Fire.Vec2(210, 230)\n        }\n    },\n    // 初始化\n    onEnable: function () {\n        var topYpos = Math.randomRange(this.topPosRange.x, this.topPosRange.y);\n        var randomSpacing = Math.randomRange(this.spacingRange.x, this.spacingRange.y);\n        var bottomYpos = topYpos - randomSpacing;\n\n        var topEntity = this.entity.find('topPipe');\n        topEntity.transform.y = topYpos;\n\n        var bottomEntity = this.entity.find('bottomPipe');\n        bottomEntity.transform.y = bottomYpos;\n\n        this.bottomRenderer = bottomEntity.getComponent(Fire.SpriteRenderer);\n        this.passed = false;\n    },\n    // 更新\n    update: function () {\n        this.transform.x -= Fire.Time.deltaTime * this.speed;\n        if (this.transform.x < this.minX) {\n            this.entity.destroy();\n        }\n    }\n});\n\nFire._RFpop();\n},{}],\"ScrollPicture\":[function(require,module,exports){\nFire._RFpush(module, '58402WJT/9LSrJLFS0HvHIx', 'ScrollPicture');\n// script/ScrollPicture.js\n\nvar ScrollPicture = Fire.Class({\n    // 继承\n    extends: Fire.Component,\n    // 属性\n    properties: {\n        // 滚动的速度\n        speed:200,\n        // X轴边缘\n        offsetX: 0\n    },\n    // 更新\n    update: function () {\n        this.transform.x -= Fire.Time.deltaTime * this.speed;\n        if (this.transform.x < -this.offsetX) {\n            this.transform.x += this.offsetX;\n        }\n    }\n});\n\nFire._RFpop();\n},{}],\"Sheep\":[function(require,module,exports){\nFire._RFpush(module, '92396N38yZEbKXKUHAlzyBA', 'Sheep');\n// script/Sheep.js\n\n//-- 绵羊状态\nvar State = Fire.defineEnum({\n    None   : -1,\n    Run    : -1,\n    Jump   : -1,\n    Drop   : -1,\n    DropEnd: -1,\n    Dead   : -1\n});\n\nvar Sheep = Fire.Class({\n    // 继承\n    extends: Fire.Component,\n    // 构造函数\n    constructor: function () {\n        // 当前播放动画组件\n        this.anim = null;\n        // 当前速度\n        this.currentSpeed = 0;\n        // 绵羊图片渲染\n        this.renderer = null;\n        // 跳跃事件\n        this.jumpEvent = null;\n    },\n    // 属性\n    properties: {\n        // 初始坐标\n        initSheepPos: new Fire.Vec2(-150, -180),\n        // Y轴最大高度\n        maxY: 250,\n        // 地面高度\n        groundY: -170,\n        // 重力\n        gravity: 9.8,\n        // 起跳速度\n        initSpeed: 500,\n        // 绵羊状态\n        _state: {\n            default: State.Run,\n            type: State,\n            visible: false\n        },\n        state: {\n            get: function () {\n                return this._state;\n            },\n            set: function(value){\n                if (value !== this._state) {\n                    this._state = value;\n                    if (this._state !== State.None) {\n                        var animName = State[this._state];\n                        this.anim.play(animName);\n                    }\n                }\n            },\n            type: State\n        },\n        // 获取Jump音效\n        jumpAudio: {\n            default: null,\n            type: Fire.AudioSource\n        },\n        // 获取Jump特效\n        jumpEffect: {\n            default: null,\n            type: Fire.Entity\n        },\n        dropEndEffect: {\n            default: null,\n            type: Fire.Entity\n        }\n    },\n    // 初始化\n    onLoad: function () {\n        this.anim = this.getComponent(Fire.SpriteAnimation);\n        this.renderer = this.getComponent(Fire.SpriteRenderer);\n        this.transform.position = this.initSheepPos;\n        // 添加绵羊控制事件(为了注销事件缓存事件)\n        this.jumpEvent = function (event) {\n            if (this.state !== State.Dead) {\n                this._jump();\n            }\n        }.bind(this);\n        Fire.Input.on('mousedown', this.jumpEvent);\n    },\n    // 删除\n    onDestroy: function () {\n        // 注销绵羊控制事件\n        Fire.Input.off('mousedown', this.jumpEvent);\n    },\n    // 更新\n    update: function () {\n        this._updateState();\n        this._updateTransform();\n    },\n    // 更新绵羊状态\n    _updateState: function () {\n        switch (this.state) {\n            case Sheep.State.Jump:\n                if (this.currentSpeed < 0) {\n                    this.state = State.Drop;\n                }\n                break;\n            case Sheep.State.Drop:\n                if (this.transform.y <= this.groundY) {\n                    this.transform.y = this.groundY;\n                    this.state = State.DropEnd;\n                    // 播放灰尘特效\n                    var pos = new Vec2(this.transform.x, this.transform.y - 30);\n                    this._playEffect(this.dropEndEffect, pos);\n                }\n                break;\n            case Sheep.State.DropEnd:\n                if (!this.anim.isPlaying('dropEnd')) {\n                    this.state = State.Run;\n                }\n                break\n            default:\n                break;\n        }\n    },\n    // 更新绵羊坐标\n    _updateTransform: function () {\n        var flying = this.state === Sheep.State.Jump || this.transform.y > this.groundY;\n        if (flying) {\n            this.currentSpeed -= (Fire.Time.deltaTime * 100) * this.gravity;\n            this.transform.y += Fire.Time.deltaTime * this.currentSpeed;\n        }\n    },\n    // 开始跳跃设置状态数据，播放动画\n    _jump: function () {\n        this.state = State.Jump;\n        this.currentSpeed = this.initSpeed;\n\n        // 播放跳音效\n        this.jumpAudio.stop();\n        this.jumpAudio.play();\n        // 播放灰尘特效\n        var pos = new Vec2(this.transform.x - 80, this.transform.y + 10);\n        this._playEffect(this.jumpEffect, pos);\n    },\n    //\n    _playEffect: function(tempEffect, pos) {\n        var effect = Fire.instantiate(tempEffect);\n        effect.transform.position = pos;\n        var effectAnim = effect.getComponent(Fire.SpriteAnimation);\n        effectAnim.play();\n    }\n});\n\nSheep.State = State;\n\nFire._RFpop();\n},{}],\"audio-clip\":[function(require,module,exports){\nFire._RFpush(module, 'audio-clip');\n// src/audio-clip.js\n\nFire.AudioClip = (function () {\n\n    /**\n     * The audio clip is an audio source data.\n     * @class AudioClip\n     * @extends Asset\n     */\n    var AudioClip = Fire.extend(\"Fire.AudioClip\", Fire.Asset);\n\n    AudioClip.prop('rawData', null, Fire.RawType('audio'), Fire.HideInInspector);\n\n    AudioClip.get('buffer', function () {\n        return Fire.AudioContext.getClipBuffer(this);\n    }, Fire.HideInInspector);\n\n    /**\n     * The length of the audio clip in seconds (Read Only).\n     * @property length\n     * @type {number}\n     * @readOnly\n     */\n    AudioClip.get(\"length\", function () {\n        return Fire.AudioContext.getClipLength(this);\n    });\n\n    /**\n     * The length of the audio clip in samples (Read Only).\n     * @property samples\n     * @type {number}\n     * @readOnly\n     */\n    AudioClip.get(\"samples\", function () {\n        return Fire.AudioContext.getClipSamples(this);\n    });\n\n    /**\n     * Channels in audio clip (Read Only).\n     * @property channels\n     * @type {number}\n     * @readOnly\n     */\n    AudioClip.get(\"channels\", function () {\n        return Fire.AudioContext.getClipChannels(this);\n    });\n\n    /**\n     * Sample frequency (Read Only).\n     * @property frequency\n     * @type {number}\n     * @readOnly\n     */\n    AudioClip.get(\"frequency\", function () {\n        return Fire.AudioContext.getClipFrequency(this);\n    });\n\n    return AudioClip;\n})();\n\n// create entity action\n// @if EDITOR\nFire.AudioClip.prototype.createEntity = function ( cb ) {\n    var ent = new Fire.Entity(this.name);\n\n    var audioSource = ent.addComponent(Fire.AudioSource);\n\n    audioSource.clip = this;\n\n    if ( cb )\n        cb (ent);\n};\n// @endif\n\nmodule.exports = Fire.AudioClip;\n\nFire._RFpop();\n},{}],\"audio-legacy\":[function(require,module,exports){\nFire._RFpush(module, 'audio-legacy');\n// src/audio-legacy.js\n\n(function(){\n    var UseWebAudio = (window.AudioContext || window.webkitAudioContext || window.mozAudioContext);\n    if (UseWebAudio) {\n        return;\n    }\n    var AudioContext = {};\n\n    function loader (url, callback, onProgress) {\n        var audio = document.createElement(\"audio\");\n        audio.addEventListener(\"canplaythrough\", function () {\n            callback(null, audio);\n        }, false);\n        audio.addEventListener('error', function (e) {\n            callback('LoadAudioClip: \"' + url +\n                    '\" seems to be unreachable or the file is empty. InnerMessage: ' + e + '\\n This may caused by fireball-x/dev#267', null);\n        }, false);\n\n        audio.src = url;\n    }\n\n    Fire.LoadManager.registerRawTypes('audio', loader);\n\n    AudioContext.initSource = function (target) {\n        target._audio = null;\n    };\n\n    AudioContext.getCurrentTime = function (target) {\n        if (target && target._audio && target._playing) {\n            return target._audio.currentTime;\n        }\n        else {\n            return 0;\n        }\n    };\n\n    AudioContext.updateTime = function (target, value) {\n        if (target && target._audio) {\n            var duration = target._audio.duration;\n            target._audio.currentTime = value;\n        }\n    };\n\n    // 靜音\n    AudioContext.updateMute = function (target) {\n        if (!target || !target._audio) { return; }\n        target._audio.muted = target.mute;\n    };\n\n    // 设置音量，音量范围是[0, 1]\n    AudioContext.updateVolume = function (target) {\n        if (!target || !target._audio) { return; }\n        target._audio.volume = target.volume;\n    };\n\n    // 设置循环\n    AudioContext.updateLoop = function (target) {\n        if (!target || !target._audio) { return; }\n        target._audio.loop = target.loop;\n    };\n\n    // 将音乐源节点绑定具体的音频buffer\n    AudioContext.updateAudioClip = function (target) {\n        if (!target || !target.clip) { return; }\n        target._audio = target.clip.rawData;\n    };\n\n    // 暫停\n    AudioContext.pause = function (target) {\n        if (!target._audio) { return; }\n        target._audio.pause();\n    };\n\n    // 停止\n    AudioContext.stop = function (target) {\n        if (!target._audio) { return; }\n        target._audio.pause();\n        target._audio.currentTime = 0;\n    };\n\n    // 播放\n    AudioContext.play = function (target) {\n        if (!target || !target.clip || !target.clip.rawData) { return; }\n        if (target._playing && !target._paused) { return; }\n        this.updateAudioClip(target);\n        this.updateVolume(target);\n        this.updateLoop(target);\n        this.updateMute(target);\n        target._audio.play();\n\n        // 播放结束后的回调\n        target._audio.addEventListener('ended', function () {\n            target._onPlayEnd.bind(target);\n        }, false);\n    };\n\n    // 获得音频剪辑的 buffer\n    AudioContext.getClipBuffer = function (clip) {\n        Fire.error(\"Audio does not contain the <Buffer> attribute!\");\n        return null;\n    };\n\n    // 以秒为单位 获取音频剪辑的 长度\n    AudioContext.getClipLength = function (clip) {\n        return clip.rawData.duration;\n    };\n\n    // 音频剪辑的长度\n    AudioContext.getClipSamples = function (target) {\n        Fire.error(\"Audio does not contain the <Samples> attribute!\");\n        return null;\n    };\n\n    // 音频剪辑的声道数\n    AudioContext.getClipChannels = function (target) {\n        Fire.error(\"Audio does not contain the <Channels> attribute!\");\n        return null;\n    };\n\n    // 音频剪辑的采样频率\n    AudioContext.getClipFrequency = function (target) {\n        Fire.error(\"Audio does not contain the <Frequency> attribute!\");\n        return null;\n    };\n\n\n    Fire.AudioContext = AudioContext;\n})();\n\nFire._RFpop();\n},{}],\"audio-source\":[function(require,module,exports){\nFire._RFpush(module, 'audio-source');\n// src/audio-source.js\n\nvar AudioSource = (function () {\n\n    /**\n     * The audio source component.\n     * @class AudioSource\n     * @extends Component\n     * @constructor\n     */\n    var AudioSource = Fire.extend(\"Fire.AudioSource\", Fire.Component, function () {\n        this._playing = false; //-- 声源暂停或者停止时候为false\n        this._paused = false;//-- 来区分声源是暂停还是停止\n\n        this._startTime = 0;\n        this._lastPlay = 0;\n\n        this._buffSource = null;\n        this._volumeGain = null;\n\n        /**\n         * The callback function which will be invoked when the audio stops\n         * @property onEnd\n         * @type {function}\n         * @default null\n         */\n        this.onEnd = null;\n    });\n\n    //\n    Fire.addComponentMenu(AudioSource, 'AudioSource');\n\n    /**\n     * Is the audio source playing (Read Only)？\n     * @property isPlaying\n     * @type {bool}\n     * @readOnly\n     * @default false\n     */\n    Object.defineProperty(AudioSource.prototype, \"isPlaying\", {\n        get: function () {\n            return this._playing && !this._paused;\n        }\n    });\n\n    /**\n     * Is the audio source paused (Read Only)?\n     * @property isPaused\n     * @type {bool}\n     * @readOnly\n     * @default false\n     */\n    Object.defineProperty(AudioSource.prototype, \"isPaused\", {\n        get: function () {\n            return this._paused;\n        }\n    });\n\n    /**\n     * Playback position in seconds.\n     * @property time\n     * @type {number}\n     * @default 0\n     */\n    Object.defineProperty(AudioSource.prototype, 'time', {\n        get: function () {\n            return Fire.AudioContext.getCurrentTime(this);\n        },\n        set: function (value) {\n            Fire.AudioContext.updateTime(this, value);\n        }\n    });\n\n    //\n    AudioSource.prop('_clip', null, Fire.HideInInspector);\n    /**\n     * The audio clip to play.\n     * @property clip\n     * @type {AudioClip}\n     * @default null\n     */\n    AudioSource.getset('clip',\n        function () {\n            return this._clip;\n        },\n        function (value) {\n            if (this._clip !== value) {\n                this._clip = value;\n                Fire.AudioContext.updateAudioClip(this);\n            }\n        },\n        Fire.ObjectType(Fire.AudioClip)\n    );\n\n    //\n    AudioSource.prop('_playbackRate', 1.0, Fire.HideInInspector);\n    /**\n     * The playback rate of the audio source.\n     * @property playbackRate\n     * @type {number}\n     * @default 1\n     */\n    AudioSource.getset('playbackRate',\n        function () {\n            return this._playbackRate;\n        },\n        function (value) {\n            if (this._playbackRate !== value) {\n                this._playbackRate = value;\n                if(this._playing) {\n                    Fire.AudioContext.updatePlaybackRate(this);\n                }\n            }\n        }\n    );\n\n    //\n    AudioSource.prop('_loop', false, Fire.HideInInspector);\n    /**\n     * Is the audio source looping?\n     * @property loop\n     * @type {bool}\n     * @default false\n     */\n    AudioSource.getset('loop',\n       function () {\n           return this._loop;\n       },\n       function (value) {\n           if (this._loop !== value) {\n               this._loop = value;\n               Fire.AudioContext.updateLoop(this);\n           }\n       }\n    );\n\n    //\n    AudioSource.prop('_mute', false, Fire.HideInInspector);\n    /**\n     * Is the audio source mute?\n     * @property mute\n     * @type {bool}\n     * @default false\n     */\n    AudioSource.getset('mute',\n       function () {\n           return this._mute;\n       },\n       function (value) {\n           if (this._mute !== value) {\n               this._mute = value;\n               Fire.AudioContext.updateMute(this);\n           }\n       }\n    );\n\n    //\n    AudioSource.prop('_volume', 1, Fire.HideInInspector);\n    /**\n     * The volume of the audio source.\n     * @property volume\n     * @type {number}\n     * @default 1\n     */\n    AudioSource.getset('volume',\n       function () {\n           return this._volume;\n       },\n       function (value) {\n           if (this._volume !== value) {\n               this._volume = Math.clamp01(value);\n               Fire.AudioContext.updateVolume(this);\n           }\n       },\n       Fire.Range(0,1)\n    );\n\n    /**\n     * If set to true, the audio source will automatically start playing on onLoad.\n     * @property playOnLoad\n     * @type {bool}\n     * @default true\n     */\n    AudioSource.prop('playOnLoad', true);\n\n    AudioSource.prototype._onPlayEnd = function () {\n        if ( this.onEnd ) {\n            this.onEnd();\n        }\n\n        this._playing = false;\n        this._paused = false;\n    };\n\n    /**\n     * Pauses the clip.\n     * @method pause\n     */\n    AudioSource.prototype.pause = function () {\n        if ( this._paused )\n            return;\n\n        Fire.AudioContext.pause(this);\n        this._paused = true;\n    };\n\n    /**\n     * Plays the clip.\n     * @method play\n     */\n    AudioSource.prototype.play = function () {\n        if ( this._playing && !this._paused )\n            return;\n\n        if ( this._paused )\n            Fire.AudioContext.play(this, this._startTime);\n        else\n            Fire.AudioContext.play(this, 0);\n\n        this._playing = true;\n        this._paused = false;\n    };\n\n    /**\n     * Stops the clip\n     * @method stop\n     */\n    AudioSource.prototype.stop = function () {\n        if ( !this._playing ) {\n            return;\n        }\n\n        Fire.AudioContext.stop(this);\n        this._playing = false;\n        this._paused = false;\n    };\n\n    AudioSource.prototype.onLoad = function () {\n        if (this._playing ) {\n            this.stop();\n        }\n    };\n\n    AudioSource.prototype.onStart = function () {\n        //if (this.playOnLoad) {\n        //    console.log(\"onStart\");\n        //    this.play();\n        //}\n    };\n\n    AudioSource.prototype.onEnable = function () {\n        if (this.playOnLoad) {\n            this.play();\n        }\n    };\n\n    AudioSource.prototype.onDisable = function () {\n        this.stop();\n    };\n\n    return AudioSource;\n})();\n\nFire.AudioSource = AudioSource;\n\nFire._RFpop();\n},{}],\"audio-web-audio\":[function(require,module,exports){\nFire._RFpush(module, 'audio-web-audio');\n// src/audio-web-audio.js\n\n(function () {\n    var NativeAudioContext = (window.AudioContext || window.webkitAudioContext || window.mozAudioContext);\n    if ( !NativeAudioContext ) {\n        return;\n    }\n\n    // fix fireball-x/dev#365\n    if (!Fire.nativeAC) {\n        Fire.nativeAC = new NativeAudioContext();\n    }\n\n    // 添加safeDecodeAudioData的原因：https://github.com/fireball-x/dev/issues/318\n    function safeDecodeAudioData(context, buffer, url, callback) {\n        var timeout = false;\n        var timerId = setTimeout(function () {\n            callback('The operation of decoding audio data already timeout! Audio url: \"' + url +\n                     '\". Set Fire.AudioContext.MaxDecodeTime to a larger value if this error often occur. ' +\n                     'See fireball-x/dev#318 for details.', null);\n        }, AudioContext.MaxDecodeTime);\n\n        context.decodeAudioData(buffer,\n            function (decodedData) {\n                if (!timeout) {\n                    callback(null, decodedData);\n                    clearTimeout(timerId);\n                }\n            },\n            function (e) {\n                if (!timeout) {\n                    callback(null, 'LoadAudioClip: \"' + url +\n                        '\" seems to be unreachable or the file is empty. InnerMessage: ' + e);\n                    clearTimeout(timerId);\n                }\n            }\n        );\n    }\n\n    function loader(url, callback, onProgress) {\n        var cb = callback && function (error, xhr) {\n            if (xhr) {\n                safeDecodeAudioData(Fire.nativeAC, xhr.response, url, callback);\n            }\n            else {\n                callback('LoadAudioClip: \"' + url +\n               '\" seems to be unreachable or the file is empty. InnerMessage: ' + error, null);\n            }\n        };\n        Fire.LoadManager._loadFromXHR(url, cb, onProgress, 'arraybuffer');\n    }\n\n    Fire.LoadManager.registerRawTypes('audio', loader);\n\n    var AudioContext = {};\n\n    AudioContext.MaxDecodeTime = 4000;\n\n    AudioContext.getCurrentTime = function (target) {\n        if ( target._paused ) {\n            return target._startTime;\n        }\n\n        if ( target._playing ) {\n            return target._startTime + this.getPlayedTime(target);\n        }\n\n        return 0;\n    };\n\n    AudioContext.getPlayedTime = function (target) {\n        return (Fire.nativeAC.currentTime - target._lastPlay) * target._playbackRate;\n    };\n\n    //\n    AudioContext.updateTime = function (target, time) {\n        target._lastPlay = Fire.nativeAC.currentTime;\n        target._startTime = time;\n\n        if ( target.isPlaying ) {\n            this.pause(target);\n            this.play(target);\n        }\n    };\n\n    //\n    AudioContext.updateMute = function (target) {\n        if (!target._volumeGain) { return; }\n        target._volumeGain.gain.value = target.mute ? -1 : (target.volume - 1);\n    };\n\n    // range [0,1]\n    AudioContext.updateVolume = function (target) {\n        if (!target._volumeGain) { return; }\n        target._volumeGain.gain.value = target.volume - 1;\n    };\n\n    //\n    AudioContext.updateLoop = function (target) {\n        if (!target._buffSource) { return; }\n        target._buffSource.loop = target.loop;\n    };\n\n    // bind buffer source\n    AudioContext.updateAudioClip = function (target) {\n        if ( target.isPlaying ) {\n            this.stop(target,false);\n            this.play(target);\n        }\n    };\n\n    //\n    AudioContext.updatePlaybackRate = function (target) {\n        if ( !this.isPaused ) {\n            this.pause(target);\n            this.play(target);\n        }\n    };\n\n    //\n    AudioContext.pause = function (target) {\n        if (!target._buffSource) { return; }\n\n        target._startTime += this.getPlayedTime(target);\n        target._buffSource.onended = null;\n        target._buffSource.stop(0);\n    };\n\n    //\n    AudioContext.stop = function ( target, ended ) {\n        if (!target._buffSource) { return; }\n\n        if ( !ended ) {\n            target._buffSource.onended = null;\n        }\n        target._buffSource.stop(0);\n    };\n\n    //\n    AudioContext.play = function ( target, at ) {\n        if (!target.clip || !target.clip.rawData) { return; }\n\n        // create buffer source\n        var bufferSource = Fire.nativeAC.createBufferSource();\n\n        // create volume control\n        var gain = Fire.nativeAC.createGain();\n\n        // connect\n        bufferSource.connect(gain);\n        gain.connect(Fire.nativeAC.destination);\n        bufferSource.connect(Fire.nativeAC.destination);\n\n        // init parameters\n        bufferSource.buffer = target.clip.rawData;\n        bufferSource.loop = target.loop;\n        bufferSource.playbackRate.value = target.playbackRate;\n        bufferSource.onended = target._onPlayEnd.bind(target);\n        gain.gain.value = target.mute ? -1 : (target.volume - 1);\n\n        //\n        target._buffSource = bufferSource;\n        target._volumeGain = gain;\n        target._startTime = at || 0;\n        target._lastPlay = Fire.nativeAC.currentTime;\n\n        // play\n        bufferSource.start( 0, this.getCurrentTime(target) );\n    };\n\n    // ===================\n\n    //\n    AudioContext.getClipBuffer = function (clip) {\n        return clip.rawData;\n    };\n\n    //\n    AudioContext.getClipLength = function (clip) {\n        if (clip.rawData) {\n            return clip.rawData.duration;\n        }\n        return -1;\n    };\n\n    //\n    AudioContext.getClipSamples = function (clip) {\n        if (clip.rawData) {\n            return clip.rawData.length;\n        }\n        return -1;\n    };\n\n    //\n    AudioContext.getClipChannels = function (clip) {\n        if (clip.rawData) {\n            return clip.rawData.numberOfChannels;\n        }\n        return -1;\n    };\n\n    //\n    AudioContext.getClipFrequency = function (clip) {\n        if (clip.rawData) {\n            return clip.rawData.sampleRate;\n        }\n        return -1;\n    };\n\n\n    Fire.AudioContext = AudioContext;\n})();\n\nFire._RFpop();\n},{}],\"sprite-animation-clip\":[function(require,module,exports){\nFire._RFpush(module, 'sprite-animation-clip');\n// sprite-animation-clip.js\n\n/**\n * @class SpriteAnimationClip\n */\n/**\n * @namespace SpriteAnimationClip\n */\n\n/**\n * @class WrapMode\n * @static\n */\nvar WrapMode = Fire.defineEnum({\n    /**\n     * @property Default\n     * @type {number}\n     */\n    Default: -1,\n    /**\n     * @property Once\n     * @type {number}\n     */\n    Once: -1,\n    /**\n     * @property Loop\n     * @type {number}\n     */\n    Loop: -1,\n    /**\n     * @property PingPong\n     * @type {number}\n     */\n    PingPong: -1,\n    /**\n     * @property ClampForever\n     * @type {number}\n     */\n    ClampForever: -1\n});\n\n/**\n * @class StopAction\n * @static\n */\nvar StopAction = Fire.defineEnum({\n    /**\n     * Do nothing\n     * @property DoNothing\n     * @type {number}\n     */\n    DoNothing: -1,\n    /**\n     * Set to default sprite when the sprite animation stopped\n     * @property DefaultSprite\n     * @type {number}\n     */\n    DefaultSprite: 1,\n    /**\n     * Hide the sprite when the sprite animation stopped\n     * @property Hide\n     * @type {number}\n     */\n    Hide: -1,\n    /**\n     * Destroy the entity the sprite belongs to when the sprite animation stopped\n     * @property Destroy\n     * @type {number}\n     */\n    Destroy: -1\n});\n\n// ------------------------------------------------------------------\n/// The structure to descrip a frame in the sprite animation clip\n// ------------------------------------------------------------------\nvar FrameInfo = Fire.define('FrameInfo')\n    .prop('sprite', null, Fire.ObjectType(Fire.Sprite))\n    .prop('frames', 0, Fire.Integer_Obsoleted);\n\n/**\n * The sprite animation clip.\n * @class SpriteAnimationClip\n * @extends CustomAsset\n * @constructor\n */\nvar SpriteAnimationClip = Fire.Class({\n    name: 'Fire.SpriteAnimationClip',\n    //\n    extends: Fire.CustomAsset,\n    //\n    constructor: function() {\n        // the array of the end frame of each frame info\n        this._frameInfoFrames = null;\n    },\n    //\n    properties: {\n        /**\n         * Default wrap mode.\n         * @property wrapMode\n         * @type {SpriteAnimationClip.WrapMode}\n         * @default SpriteAnimationClip.WrapMode.Default\n         */\n        wrapMode: {\n            default: WrapMode.Default,\n            type: WrapMode\n        },\n        /**\n         * The default type of action used when the animation stopped.\n         * @property stopAction\n         * @type {SpriteAnimationClip.StopAction}\n         * @default SpriteAnimationClip.StopAction.DoNothing\n         */\n        stopAction: {\n            default: StopAction.DoNothing,\n            type: StopAction\n        },\n        /**\n        * The default speed of the animation clip.\n        * @property speed\n        * @type {number}\n        * @default 1\n        */\n        speed: 1,\n        //\n        _frameRate: 60,\n        /**\n         * The sample rate used in this animation clip.\n         * @property frameRate\n         * @type {number}\n         * @default 60\n         */\n        frameRate: {\n            get: function() {\n                return this._frameRate;\n            },\n            set: function() {\n                if (value !== this._frameRate) {\n                    this._frameRate = Math.round(Math.max(value, 1));\n                }\n            }\n        },\n        /**\n         * The frame infos in the sprite animation clips.\n         * are array of {sprite: Sprite, frames: Sustained_how_many_frames}\n         * @property frameInfos\n         * @type {object[]}\n         * @default []\n         */\n        frameInfos:{\n            default: [],\n            type: FrameInfo\n        }\n    },\n    //\n    getTotalFrames: function() {\n        var frames = 0;\n        for (var i = 0; i < this.frameInfos.length; ++i) {\n            frames += this.frameInfos[i].frames;\n        }\n        return frames;\n    },\n    //\n    getFrameInfoFrames: function() {\n        if (this._frameInfoFrames === null) {\n            this._frameInfoFrames = new Array(this.frameInfos.length);\n            var totalFrames = 0;\n            for (var i = 0; i < this.frameInfos.length; ++i) {\n                totalFrames += this.frameInfos[i].frames;\n                this._frameInfoFrames[i] = totalFrames;\n            }\n        }\n        return this._frameInfoFrames;\n    }\n});\n\nSpriteAnimationClip.WrapMode = WrapMode;\n\nSpriteAnimationClip.StopAction = StopAction;\n\nFire.addCustomAssetMenu(SpriteAnimationClip, \"New Sprite Animation\");\n\nFire.SpriteAnimationClip = SpriteAnimationClip;\n\nmodule.exports = SpriteAnimationClip;\n\nFire._RFpop();\n},{}],\"sprite-animation-state\":[function(require,module,exports){\nFire._RFpush(module, 'sprite-animation-state');\n// sprite-animation-state.js\n\nvar SpriteAnimationClip = require('sprite-animation-clip');\n\n/**\n * The sprite animation state.\n * @class SpriteAnimationState\n * @constructor\n * @param {SpriteAnimationClip} animClip\n */\nvar SpriteAnimationState = function (animClip) {\n    if (!animClip) {\n// @if DEV\n        Fire.error('Unspecified sprite animation clip');\n// @endif\n        return;\n    }\n    /**\n     * The name of the sprite animation state.\n     * @property name\n     * @type {string}\n     */\n    this.name = animClip.name;\n    /**\n     * The referenced sprite animation clip\n     * @property clip\n     * @type {SpriteAnimationClip}\n     */\n    this.clip = animClip;\n    /**\n     * The wrap mode\n     * @property wrapMode\n     * @type {SpriteAnimationClip.WrapMode}\n     */\n    this.wrapMode = animClip.wrapMode;\n    /**\n     * The stop action\n     * @property stopAction\n     * @type {SpriteAnimationClip.StopAction}\n     */\n    this.stopAction = animClip.stopAction;\n    /**\n     * The speed to play the sprite animation clip\n     * @property speed\n     * @type {number}\n     */\n    this.speed = animClip.speed;\n    // the array of the end frame of each frame info in the sprite animation clip\n    this._frameInfoFrames = animClip.getFrameInfoFrames();\n    /**\n     * The total frame count of the sprite animation clip\n     * @property totalFrames\n     * @type {number}\n     */\n    this.totalFrames = this._frameInfoFrames.length > 0 ? this._frameInfoFrames[this._frameInfoFrames.length - 1] : 0;\n    /**\n     * The length of the sprite animation in seconds with speed = 1.0f\n     * @property length\n     * @type {number}\n     */\n    this.length = this.totalFrames / animClip.frameRate;\n    // The current index of frame. The value can be larger than totalFrames.\n    // If the frame is larger than totalFrames it will be wrapped according to wrapMode.\n    this.frame = -1;\n    // the current time in seoncds\n    this.time = 0;\n    // cache result of GetCurrentIndex\n    this._cachedIndex = -1;\n};\n\n/**\n * The current frame info index.\n * @method getCurrentIndex\n * @return {number}\n */\nSpriteAnimationState.prototype.getCurrentIndex = function () {\n    if (this.totalFrames > 1) {\n        //int oldFrame = frame;\n        this.frame = Math.floor(this.time * this.clip.frameRate);\n        if (this.frame < 0) {\n            this.frame = -this.frame;\n        }\n\n        var wrappedIndex;\n        if (this.wrapMode !== SpriteAnimationClip.WrapMode.PingPong) {\n            wrappedIndex = _wrap(this.frame, this.totalFrames - 1, this.wrapMode);\n        }\n        else {\n            wrappedIndex = this.frame;\n            var cnt = Math.floor(wrappedIndex / this.totalFrames);\n            wrappedIndex %= this.totalFrames;\n            if ((cnt & 0x1) === 1) {\n                wrappedIndex = this.totalFrames - 1 - wrappedIndex;\n            }\n        }\n\n        // try to use cached frame info index\n        if (this._cachedIndex - 1 >= 0 &&\n            wrappedIndex >= this._frameInfoFrames[this._cachedIndex - 1] &&\n            wrappedIndex < this._frameInfoFrames[this._cachedIndex]) {\n            return this._cachedIndex;\n        }\n\n        // search frame info\n        var frameInfoIndex = _binarySearch(this._frameInfoFrames, wrappedIndex + 1);\n        if (frameInfoIndex < 0) {\n            frameInfoIndex = ~frameInfoIndex;\n        }\n        this._cachedIndex = frameInfoIndex;\n        return frameInfoIndex;\n    }\n    else if (this.totalFrames === 1) {\n        return 0;\n    }\n    else {\n        return -1;\n    }\n};\n\n// ------------------------------------------------------------------ \n/// C# Array.BinarySearch\n// ------------------------------------------------------------------ \nfunction _binarySearch (array, value) {\n    var l = 0, h = array.length - 1;\n    while (l <= h) {\n        var m = ((l + h) >> 1);\n        if (array[m] === value) {\n            return m;\n        }\n        if (array[m] > value) {\n            h = m - 1;\n        }\n        else {\n            l = m + 1;\n        }\n    }\n    return ~l;\n}\n\nfunction _wrap (_value, _maxValue, _wrapMode) {\n    if (_maxValue === 0) {\n        return 0;\n    }\n    if (_value < 0) {\n        _value = -_value;\n    }\n    if (_wrapMode === SpriteAnimationClip.WrapMode.Loop) {\n        return _value % (_maxValue + 1);\n    }\n    else if (_wrapMode === SpriteAnimationClip.WrapMode.PingPong) {\n        var cnt = Math.floor(_value / _maxValue);\n        _value %= _maxValue;\n        if (cnt % 2 === 1) {\n            return _maxValue - _value;\n        }\n    }\n    else {\n        if (_value < 0) {\n            return 0;\n        }\n        if (_value > _maxValue) {\n            return _maxValue;\n        }\n    }\n    return _value;\n}\n\nFire.SpriteAnimationState = SpriteAnimationState;\n\nmodule.exports = SpriteAnimationState;\n\nFire._RFpop();\n},{\"sprite-animation-clip\":\"sprite-animation-clip\"}],\"sprite-animation\":[function(require,module,exports){\nFire._RFpush(module, 'sprite-animation');\n// sprite-animation.js\n\nvar SpriteAnimationClip = require('sprite-animation-clip');\nvar SpriteAnimationState = require('sprite-animation-state');\n\n/**\n * The sprite animation Component.\n * @class SpriteAnimation\n * @extends Component\n * @constructor\n */\nvar SpriteAnimation = Fire.Class({\n    //\n    name: \"Fire.SpriteAnimation\",\n    //\n    extends: Fire.Component,\n    //\n    constructor: function() {\n        this._nameToState = null;\n        this._curAnimation = null;\n        this._spriteRenderer = null;\n        this._defaultSprite = null;\n        this._lastFrameIndex = -1;\n        this._curIndex = -1;\n        this._playStartFrame = 0;// 在调用Play的当帧的LateUpdate不进行step\n    },\n    //\n    properties:{\n        /**\n         * The default animation.\n         * @property defaultAnimation\n         * @type {SpriteAnimationClip}\n         * @default null\n         */\n        defaultAnimation: {\n            default: null,\n            type: Fire.SpriteAnimationClip\n        },\n        /**\n         * The Animated clip list.\n         * @property animations\n         * @type {SpriteAnimationClip[]}\n         * @default []\n         */\n        animations: {\n            default: [],\n            type: Fire.SpriteAnimationClip\n        },\n        //\n        _playAutomatically: true,\n        /**\n         * Should the default animation clip (Animation.clip) automatically start playing on startup.\n         * @property playAutomatically\n         * @type {boolean}\n         * @default true\n         */\n        playAutomatically: {\n            get: function() {\n                return this._playAutomatically;\n            },\n            set: function (value) {\n                this._playAutomatically = value;\n            }\n        }\n    },\n    //\n    _init: function() {\n        var initialized = (this._nameToState !== null);\n        if (initialized === false) {\n            this._spriteRenderer = this.entity.getComponent(Fire.SpriteRenderer);\n            this._defaultSprite = this._spriteRenderer.sprite;\n\n            this._nameToState = {};\n            var state = null;\n            for (var i = 0; i < this.animations.length; ++i) {\n                var clip = this.animations[i];\n                if (clip !== null) {\n                    state = new SpriteAnimationState(clip);\n                    this._nameToState[state.name] = state;\n                }\n            }\n\n            if (!this.getAnimState(this.defaultAnimation.name)) {\n                state = new SpriteAnimationState(this.defaultAnimation);\n                this._nameToState[state.name] = state;\n            }\n        }\n    },\n    /**\n     * Get Animation State.\n     * @method getAnimState\n     * @param {string} animName - The name of the animation\n     * @return {SpriteAnimationState}\n     */\n    getAnimState: function (name) {\n        return this._nameToState && this._nameToState[name];\n    },\n    /**\n     * Indicates whether the animation is playing\n     * @method isPlaying\n     * @param {string} [name] - The name of the animation\n     * @return {boolean}\n     */\n    isPlaying: function(name) {\n        var playingAnim = this.enabled && this._curAnimation;\n        return !!playingAnim && ( !name || playingAnim.name === name );\n    },\n    /**\n     * Play Animation\n     * @method play\n     * @param {SpriteAnimationState} [animState] - The animState of the sprite Animation state or animation name\n     * @param {number} [time] - The time of the animation time\n     */\n    play: function (animState, time) {\n        if (typeof animState === 'string') {\n            this._curAnimation = this.getAnimState(animState);\n        }\n        else {\n            this._curAnimation = animState || new SpriteAnimationState(this.defaultAnimation);\n        }\n\n        if (this._curAnimation !== null) {\n            this._curIndex = -1;\n            this._curAnimation.time = time || 0;\n            this._playStartFrame = Fire.Time.frameCount;\n            this._sample();\n        }\n    },\n    /**\n     * Stop Animation\n     * @method stop\n     * @param {SpriteAnimationState} [animState] - The animState of the sprite animation state or animation name\n     */\n    stop: function (animState) {\n        if (typeof animState === 'string') {\n            this._curAnimation = this.getAnimState(animState);\n        }\n        else {\n            this._curAnimation = animState || new SpriteAnimationState(this.defaultAnimation);\n        }\n\n        if (this._curAnimation !== null) {\n\n            this._curAnimation.time = 0;\n\n            var stopAction = this._curAnimation.stopAction;\n\n            switch (stopAction) {\n                case SpriteAnimationClip.StopAction.DoNothing:\n                    break;\n                case SpriteAnimationClip.StopAction.DefaultSprite:\n                    this._spriteRenderer.sprite = this._defaultSprite;\n                    break;\n                case SpriteAnimationClip.StopAction.Hide:\n                    this._spriteRenderer.enabled = false;\n                    break;\n                case SpriteAnimationClip.StopAction.Destroy:\n                    this.entity.destroy();\n                    break;\n                default:\n                    break;\n            }\n\n            this._curAnimation = null;\n        }\n    },\n    onLoad: function() {\n        this._init();\n        if (this.enabled) {\n            if (this._playAutomatically && this.defaultAnimation) {\n                var animState = this.getAnimState(this.defaultAnimation.name);\n                this.play(animState, 0);\n            }\n        }\n    },\n    lateUpdate: function() {\n        if (this._curAnimation !== null && Fire.Time.frameCount > this._playStartFrame) {\n            var delta = Fire.Time.deltaTime * this._curAnimation.speed;\n            this._step(delta);\n        }\n    },\n    _step: function (deltaTime) {\n        if (this._curAnimation !== null) {\n            this._curAnimation.time += deltaTime;\n            this._sample();\n            var stop = false;\n            if (this._curAnimation.wrapMode === SpriteAnimationClip.WrapMode.Once ||\n                this._curAnimation.wrapMode === SpriteAnimationClip.WrapMode.Default ||\n                this._curAnimation.wrapMode === SpriteAnimationClip.WrapMode.ClampForever) {\n                if (this._curAnimation.speed > 0 && this._curAnimation.frame >= this._curAnimation.totalFrames) {\n                    if (this._curAnimation.wrapMode === SpriteAnimationClip.WrapMode.ClampForever) {\n                        stop = false;\n                        this._curAnimation.frame = this._curAnimation.totalFrames;\n                        this._curAnimation.time = this._curAnimation.frame / this._curAnimation.clip.frameRate;\n                    }\n                    else {\n                        stop = true;\n                        this._curAnimation.frame = this._curAnimation.totalFrames;\n                    }\n                }\n                else if (this._curAnimation.speed < 0 && this._curAnimation.frame < 0) {\n                    if (this._curAnimation.wrapMode === SpriteAnimationClip.WrapMode.ClampForever) {\n                        stop = false;\n                        this._curAnimation.time = 0;\n                        this._curAnimation.frame = 0;\n                    }\n                    else {\n                        stop = true;\n                        this._curAnimation.frame = 0;\n                    }\n                }\n            }\n\n            // do stop\n            if (stop) {\n                this.stop(this._curAnimation);\n            }\n        }\n        else {\n            this._curIndex = -1;\n        }\n    },\n    _sample: function () {\n        if (this._curAnimation !== null) {\n            var newIndex = this._curAnimation.getCurrentIndex();\n            if (newIndex >= 0 && newIndex != this._curIndex) {\n                this._spriteRenderer.sprite = this._curAnimation.clip.frameInfos[newIndex].sprite;\n            }\n            this._curIndex = newIndex;\n        }\n        else {\n            this._curIndex = -1;\n        }\n    }\n});\n\nFire.SpriteAnimation = SpriteAnimation;\n\nFire.addComponentMenu(SpriteAnimation, 'Sprite Animation');\n\nFire._RFpop();\n},{\"sprite-animation-clip\":\"sprite-animation-clip\",\"sprite-animation-state\":\"sprite-animation-state\"}]},{},[\"audio-clip\",\"audio-legacy\",\"audio-source\",\"audio-web-audio\",\"sprite-animation-clip\",\"sprite-animation-state\",\"sprite-animation\",\"Game\",\"GameOverMenu\",\"MainMenu\",\"PipeGroup\",\"PipeGroupManager\",\"ScrollPicture\",\"Sheep\"]);\n"],"sourceRoot":"/source/"}